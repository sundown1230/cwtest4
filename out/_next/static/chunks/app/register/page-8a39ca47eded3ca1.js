(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{3214:function(e,r,t){Promise.resolve().then(t.bind(t,4218))},7907:function(e,r,t){"use strict";var n=t(5313);t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})},9079:function(e,r,t){"use strict";var n,s;e.exports=(null==(n=t.g.process)?void 0:n.env)&&"object"==typeof(null==(s=t.g.process)?void 0:s.env)?t.g.process:t(3127)},3127:function(e){"use strict";!function(){var r={229:function(e){var r,t,n,s=e.exports={};function o(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{t="function"==typeof clearTimeout?clearTimeout:i}catch(e){t=i}}();var l=[],u=!1,c=-1;function d(){u&&n&&(u=!1,n.length?l=n.concat(l):c=-1,l.length&&f())}function f(){if(!u){var e=a(d);u=!0;for(var r=l.length;r;){for(n=l,l=[];++c<r;)n&&n[c].run();c=-1,r=l.length}n=null,u=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===i||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}(e)}}function m(e,r){this.fun=e,this.array=r}function b(){}s.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];l.push(new m(e,r)),1!==l.length||u||a(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=b,s.addListener=b,s.once=b,s.off=b,s.removeListener=b,s.removeAllListeners=b,s.emit=b,s.prependListener=b,s.prependOnceListener=b,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},t={};function n(e){var s=t[e];if(void 0!==s)return s.exports;var o=t[e]={exports:{}},i=!0;try{r[e](o,o.exports,n),i=!1}finally{i&&delete t[e]}return o.exports}n.ab="//";var s=n(229);e.exports=s}()},4218:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var n=t(3827),s=t(4090),o=t(7907),i=t(8792);let a=t(9079).env.NEXT_PUBLIC_API_URL||"";function l(){let e=(0,o.useRouter)(),[r,t]=(0,s.useState)([]),[l,u]=(0,s.useState)(""),[c,d]=(0,s.useState)(!1),[f,m]=(0,s.useState)({name:"",gender:"M",birthdate:"",license_date:"",specialties:[],email:"",password:""});(0,s.useEffect)(()=>{b()},[]);let b=async()=>{try{let e=await fetch("".concat(a,"/_api/specialties"));if(!e.ok)throw Error("診療科情報の取得に失敗しました");let r=await e.json();r.success&&r.data&&t(r.data)}catch(e){console.error("Failed to fetch specialties:",e),u("診療科情報の取得に失敗しました")}},h=async r=>{r.preventDefault(),d(!0),u("");try{let r=await fetch("".concat(a,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),t=await r.json();r.ok?e.push("/login"):u(t.error||"登録に失敗しました")}catch(e){console.error("Registration error:",e),u("登録中にエラーが発生しました")}finally{d(!1)}},p=e=>{let{name:r,value:t}=e.target;m(e=>({...e,[r]:t}))};return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 w-full max-w-md",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold text-center mb-6 text-gray-800",children:"新規会員登録"}),l&&(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded mb-4 text-sm",children:l}),(0,n.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"名前"}),(0,n.jsx)("input",{type:"text",name:"name",value:f.name,onChange:p,className:"w-full px-3 py-2 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:c})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"性別"}),(0,n.jsxs)("select",{name:"gender",value:f.gender,onChange:p,className:"w-full px-3 py-2 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:c,children:[(0,n.jsx)("option",{value:"M",children:"男性"}),(0,n.jsx)("option",{value:"F",children:"女性"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"生年月日"}),(0,n.jsx)("input",{type:"date",name:"birthdate",value:f.birthdate,onChange:p,className:"w-full px-3 py-2 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:c})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"医師免許取得日"}),(0,n.jsx)("input",{type:"date",name:"license_date",value:f.license_date,onChange:p,className:"w-full px-3 py-2 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:c})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"診療科"}),(0,n.jsxs)("select",{name:"specialties",value:f.specialties[0]||"",onChange:e=>m(r=>({...r,specialties:[e.target.value]})),className:"w-full px-3 py-2 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:c,children:[(0,n.jsx)("option",{value:"",children:"選択してください"}),r.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"メールアドレス"}),(0,n.jsx)("input",{type:"email",name:"email",value:f.email,onChange:p,className:"w-full px-3 py-2 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:c})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"パスワード"}),(0,n.jsx)("input",{type:"password",name:"password",value:f.password,onChange:p,className:"w-full px-3 py-2 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:c,minLength:8})]}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:c,children:c?"登録中...":"登録"})]}),(0,n.jsx)("div",{className:"mt-4 text-center",children:(0,n.jsx)(i.default,{href:"/login",className:"text-sm text-blue-600 hover:text-blue-700",children:"すでにアカウントをお持ちの方はこちら"})})]})})}}},function(e){e.O(0,[792,971,69,744],function(){return e(e.s=3214)}),_N_E=e.O()}]);