(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{6396:function(e,r,s){Promise.resolve().then(s.bind(s,564))},7648:function(e,r,s){"use strict";s.d(r,{default:function(){return a.a}});var t=s(2972),a=s.n(t)},9376:function(e,r,s){"use strict";var t=s(5475);s.o(t,"useParams")&&s.d(r,{useParams:function(){return t.useParams}}),s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}})},564:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return i}});var t=s(7437),a=s(2265),l=s(9376),n=s(7648);function i(){let e=(0,l.useRouter)(),[r,s]=(0,a.useState)([]),[i,d]=(0,a.useState)(""),[o,u]=(0,a.useState)(!1),[c,b]=(0,a.useState)({name:"",gender:"M",birthdate:"",license_date:"",specialties:[],email:"",password:""});(0,a.useEffect)(()=>{m()},[]);let m=async()=>{try{u(!0);let e=await fetch("/api/specialties");if(!e.ok)throw Error("診療科情報の取得に失敗しました");let r=await e.json();if(r.success&&r.data)s(r.data);else throw Error(r.error||"診療科情報の取得に失敗しました")}catch(e){console.error("Failed to fetch specialties:",e),d("診療科情報の取得に失敗しました")}finally{u(!1)}},f=async r=>{r.preventDefault(),u(!0),d("");try{let r=await fetch("/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),s=await r.json();r.ok?e.push("/login"):d(s.error||"登録に失敗しました")}catch(e){console.error("Registration error:",e),d("登録中にエラーが発生しました")}finally{u(!1)}},x=e=>{let{name:r,value:s}=e.target;b(e=>({...e,[r]:s}))};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 w-full max-w-md",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-center mb-6 text-gray-800",children:"新規会員登録"}),i&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded mb-4 text-sm",children:i}),(0,t.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"名前"}),(0,t.jsx)("input",{type:"text",name:"name",value:c.name,onChange:x,className:"w-full px-3 py-2 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:o})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"性別"}),(0,t.jsxs)("select",{name:"gender",value:c.gender,onChange:x,className:"w-full px-3 py-2 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:o,children:[(0,t.jsx)("option",{value:"M",children:"男性"}),(0,t.jsx)("option",{value:"F",children:"女性"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"生年月日"}),(0,t.jsx)("input",{type:"date",name:"birthdate",value:c.birthdate,onChange:x,className:"w-full px-3 py-2 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:o})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"医師免許取得日"}),(0,t.jsx)("input",{type:"date",name:"license_date",value:c.license_date,onChange:x,className:"w-full px-3 py-2 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:o})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"診療科"}),(0,t.jsxs)("select",{name:"specialties",value:c.specialties[0]||"",onChange:e=>b(r=>({...r,specialties:[e.target.value]})),className:"w-full px-3 py-2 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:o,children:[(0,t.jsx)("option",{value:"",children:"選択してください"}),r.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"メールアドレス"}),(0,t.jsx)("input",{type:"email",name:"email",value:c.email,onChange:x,className:"w-full px-3 py-2 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:o})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"パスワード"}),(0,t.jsx)("input",{type:"password",name:"password",value:c.password,onChange:x,className:"w-full px-3 py-2 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:o,minLength:8})]}),(0,t.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:o,children:o?"登録中...":"登録"})]}),(0,t.jsx)("div",{className:"mt-4 text-center",children:(0,t.jsx)(n.default,{href:"/login",className:"text-sm text-blue-600 hover:text-blue-700",children:"すでにアカウントをお持ちの方はこちら"})})]})})}}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=6396)}),_N_E=e.O()}]);